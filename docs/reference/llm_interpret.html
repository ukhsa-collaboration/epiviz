<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Interpret Epidemiological Data or Visualisations using LLMs — llm_interpret • epiviz</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Interpret Epidemiological Data or Visualisations using LLMs — llm_interpret"><meta name="description" content="
This function interprets a given data frame or ggplot visualisation by sending it to a language model API via the ellmer package. It supports multiple LLM providers, allowing users to specify the desired provider and model through environment variables."><meta property="og:description" content="
This function interprets a given data frame or ggplot visualisation by sending it to a language model API via the ellmer package. It supports multiple LLM providers, allowing users to specify the desired provider and model through environment variables."><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epiviz</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/age-sex-pyramid.html">Age-sex pyramids</a></li>
    <li><a class="dropdown-item" href="../articles/col-chart.html">Column charts</a></li>
    <li><a class="dropdown-item" href="../articles/epi-curve.html">Epidemic curves</a></li>
    <li><a class="dropdown-item" href="../articles/epi-map.html">Epidemiological maps</a></li>
    <li><a class="dropdown-item" href="../articles/getting-started.html">Getting started with epiviz</a></li>
    <li><a class="dropdown-item" href="../articles/line-chart.html">Line charts</a></li>
    <li><a class="dropdown-item" href="../articles/llm-interpret.html">LLM interpretation</a></li>
    <li><a class="dropdown-item" href="../articles/point-chart.html">Point charts</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ukhsa-collaboration/epiviz/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Interpret Epidemiological Data or Visualisations using LLMs</h1>
      <small class="dont-index">Source: <a href="https://github.com/ukhsa-collaboration/epiviz/blob/HEAD/R/llm_interpret.R" class="external-link"><code>R/llm_interpret.R</code></a></small>
      <div class="d-none name"><code>llm_interpret.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p>This function interprets a given data frame or ggplot visualisation by sending it to a language model API via the ellmer package. It supports multiple LLM providers, allowing users to specify the desired provider and model through environment variables.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">llm_interpret</span><span class="op">(</span><span class="va">input</span>, word_limit <span class="op">=</span> <span class="fl">100</span>, prompt_extension <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-input">input<a class="anchor" aria-label="anchor" href="#arg-input"></a></dt>
<dd><p>An input object, either a data frame or a ggplot object, representing the data or visualisation to be interpreted.</p></dd>


<dt id="arg-word-limit">word_limit<a class="anchor" aria-label="anchor" href="#arg-word-limit"></a></dt>
<dd><p>Integer. The desired word length for the response. Defaults to 100.</p></dd>


<dt id="arg-prompt-extension">prompt_extension<a class="anchor" aria-label="anchor" href="#arg-prompt-extension"></a></dt>
<dd><p>Character. Optional additional instructions to extend the standard prompt. Defaults to NULL.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A character string containing the narrative or interpretation of the input object as generated by the LLM.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><strong>Supported LLM Providers and Models:</strong></p><ul><li><p><strong>OpenAI</strong>: Utilises OpenAI's models via <code>chat_openai()</code>. Requires setting the <code>OPENAI_API_KEY</code> environment variable. Applicable models include:</p><ul><li><p><code>"gpt-4.1-nano"</code></p></li>
</ul></li>
<li><p><strong>Google Gemini</strong>: Utilises Google's Gemini models via <code>chat_gemini()</code>. Requires setting the <code>GOOGLE_API_KEY</code> environment variable. Applicable models include:</p><ul><li><p><code>"claude-sonnet-4-20250514"</code></p></li>
</ul></li>
<li><p><strong>Anthropic Claude</strong>: Utilises Anthropic's Claude models via <code>chat_anthropic()</code>. Requires setting the <code>CLAUDE_API_KEY</code> environment variable. Applicable models include:</p><ul><li><p><code>"claude-sonnet-4-20250514"</code></p></li>
</ul></li>
</ul><p><strong>Environment Variables:</strong></p><ul><li><p><code>LLM_PROVIDER</code>: Specifies the LLM provider ("openai", "gemini", "anthropic").</p></li>
<li><p><code>LLM_API_KEY</code>: The API key corresponding to the chosen provider.</p></li>
<li><p><code>LLM_MODEL</code>: The model identifier to use.</p></li>
</ul><p><strong>Note:</strong> Ensure that the appropriate environment variables are set before invoking this function. The function will throw an error if the specified provider is unsupported or if required environment variables are missing.</p>
    </div>
    <div class="section level2">
    <h2 id="tested-models">Tested Models<a class="anchor" aria-label="anchor" href="#tested-models"></a></h2>


<p>As of October 2025, this function has been tested and verified to work with the following models:</p><ul><li><p>OpenAI: gpt-4.1-nano</p></li>
<li><p>Anthropic: claude-sonnet-4-20250514</p></li>
<li><p>Google Gemini: gemini-2.5-flash-lite</p></li>
</ul><p>Additional models may be tested in the future. Users can provide custom instructions
through the <code>prompt_extension</code> parameter for specialised analysis requirements.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Harshana Liyanage, Alex Bhattacharya, James Duke, Liam Fitzpatrick, James Leatherland, Jordan Worth, Emma Parker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

