<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting started with epiviz • epiviz</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with epiviz">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epiviz</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/age-sex-pyramid.html">Age-sex pyramids</a></li>
    <li><a class="dropdown-item" href="../articles/col-chart.html">Column charts</a></li>
    <li><a class="dropdown-item" href="../articles/epi-curve.html">Epi curves</a></li>
    <li><a class="dropdown-item" href="../articles/epi-map.html">Epidemiological maps</a></li>
    <li><a class="dropdown-item" href="../articles/getting-started.html">Getting started with epiviz</a></li>
    <li><a class="dropdown-item" href="../articles/line-chart.html">Line charts</a></li>
    <li><a class="dropdown-item" href="../articles/llm-interpret.html">LLM-assisted epidemiological narrative</a></li>
    <li><a class="dropdown-item" href="../articles/point-chart.html">Point charts</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ukhsa-collaboration/epiviz/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Getting started with epiviz</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ukhsa-collaboration/epiviz/blob/HEAD/vignettes/getting-started.Rmd" class="external-link"><code>vignettes/getting-started.Rmd</code></a></small>
      <div class="d-none name"><code>getting-started.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>epiviz</code> package provides epidemiological
visualization functions for creating both static (ggplot2) and
interactive (plotly) charts commonly used in public health surveillance
and outbreak investigation. This guide introduces you to the package
using the built-in <code>lab_data</code> dataset.</p>
</div>
<div class="section level2">
<h2 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ukhsa-collaboration/epiviz" class="external-link">epiviz</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-lab_data-dataset">The lab_data dataset<a class="anchor" aria-label="anchor" href="#the-lab_data-dataset"></a>
</h2>
<p><code>lab_data</code> is a synthetic laboratory dataset included with
epiviz for demonstration purposes. It contains simulated laboratory
detection data with typical epidemiological variables:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Explore the structure of lab_data</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="fu">epiviz</span><span class="fu">::</span><span class="va"><a href="../reference/lab_data.html">lab_data</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 32,560</span></span>
<span><span class="co">## Columns: 8</span></span>
<span><span class="co">## $ date_of_birth         <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 1938-10-05<span style="color: #949494;">, </span>1957-04-04<span style="color: #949494;">, </span>1927-06-24<span style="color: #949494;">, </span>1962-06-14<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">## $ sex                   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> Female<span style="color: #949494;">, </span>Male<span style="color: #949494;">, </span>Male<span style="color: #949494;">, </span>Male<span style="color: #949494;">, </span>Male<span style="color: #949494;">, </span>Male<span style="color: #949494;">, </span>Male<span style="color: #949494;">, </span>Male…</span></span>
<span><span class="co">## $ organism_species_name <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> KLEBSIELLA PNEUMONIAE<span style="color: #949494;">, </span>KLEBSIELLA PNEUMONIAE<span style="color: #949494;">, </span>ST…</span></span>
<span><span class="co">## $ specimen_date         <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2020-05-24<span style="color: #949494;">, </span>2023-07-08<span style="color: #949494;">, </span>2023-02-24<span style="color: #949494;">, </span>2023-08-26<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">## $ lab_code              <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> BI20985<span style="color: #949494;">, </span>JH70033<span style="color: #949494;">, </span>CU5997<span style="color: #949494;">, </span>ES3851<span style="color: #949494;">, </span>YA29556<span style="color: #949494;">, </span>QF111…</span></span>
<span><span class="co">## $ local_authority_name  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Worthing"<span style="color: #949494;">, </span>"Reading"<span style="color: #949494;">, </span>"Plymouth"<span style="color: #949494;">, </span>"Cheshire Wes…</span></span>
<span><span class="co">## $ local_authority_code  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "E07000229"<span style="color: #949494;">, </span>"E06000038"<span style="color: #949494;">, </span>"E06000026"<span style="color: #949494;">, </span>"E0600005…</span></span>
<span><span class="co">## $ region                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "South East"<span style="color: #949494;">, </span>"South East"<span style="color: #949494;">, </span>"South West"<span style="color: #949494;">, </span>"North…</span></span></code></pre>
<p>The dataset includes: - <strong>Patient demographics</strong>:
<code>date_of_birth</code>, <code>sex</code> - <strong>Laboratory
information</strong>: <code>organism_species_name</code>,
<code>specimen_date</code>, <code>lab_code</code> - <strong>Geographic
data</strong>: <code>local_authority_name</code>,
<code>local_authority_code</code>, <code>region</code></p>
</div>
<div class="section level2">
<h2 id="example-1-regional-distribution-of-detections">Example 1: Regional distribution of detections<a class="anchor" aria-label="anchor" href="#example-1-regional-distribution-of-detections"></a>
</h2>
<p>When analyzing laboratory surveillance data, we often want to
understand the geographic distribution of detections. Here we’ll create
a simple column chart showing detections by region for a specific time
period.</p>
<div class="section level3">
<h3 id="prepare-the-data">Prepare the data<a class="anchor" aria-label="anchor" href="#prepare-the-data"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter to a specific time period and aggregate by region</span></span>
<span><span class="va">regional_detections</span> <span class="op">&lt;-</span> <span class="fu">epiviz</span><span class="fu">::</span><span class="va"><a href="../reference/lab_data.html">lab_data</a></span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">specimen_date</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-01-01"</span><span class="op">)</span>,</span>
<span>    <span class="va">specimen_date</span> <span class="op">&lt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-01-31"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">region</span>, name <span class="op">=</span> <span class="st">"detections"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">detections</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>  <span class="co"># Keep top 6 regions for readability</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    <span class="co"># Handle long region names for better display</span></span>
<span>    region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">region</span> <span class="op">==</span> <span class="st">"Yorkshire and Humber"</span>, </span>
<span>                   <span class="st">"Yorkshire and\nHumber"</span>, <span class="va">region</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-the-visualization">Create the visualization<a class="anchor" aria-label="anchor" href="#create-the-visualization"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/col_chart.html">col_chart</a></span><span class="op">(</span></span>
<span>  dynamic <span class="op">=</span> <span class="cn">FALSE</span>,  <span class="co"># Create static ggplot chart</span></span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    df <span class="op">=</span> <span class="va">regional_detections</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"region"</span>,           <span class="co"># Variable for x-axis</span></span>
<span>    y <span class="op">=</span> <span class="st">"detections"</span>,       <span class="co"># Variable for y-axis</span></span>
<span>    fill_colours <span class="op">=</span> <span class="st">"#007C91"</span>,  <span class="co"># Single color for all bars</span></span>
<span>    chart_title <span class="op">=</span> <span class="st">"Laboratory detections by region (January 2023)"</span>,</span>
<span>    x_axis_title <span class="op">=</span> <span class="st">"Region"</span>,</span>
<span>    y_axis_title <span class="op">=</span> <span class="st">"Number of detections"</span>,</span>
<span>    x_axis_label_angle <span class="op">=</span> <span class="op">-</span><span class="fl">45</span>,  <span class="co"># Rotate labels for readability</span></span>
<span>    show_gridlines <span class="op">=</span> <span class="cn">FALSE</span>     <span class="co"># Remove grid lines for cleaner look</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/regional-chart-1.png" width="768"></p>
<p><strong>Interpretation</strong>: This chart shows the regional
distribution of laboratory detections in January 2023, with London
having the highest number of detections.</p>
</div>
</div>
<div class="section level2">
<h2 id="example-2-temporal-trends-in-detections">Example 2: Temporal trends in detections<a class="anchor" aria-label="anchor" href="#example-2-temporal-trends-in-detections"></a>
</h2>
<p>Time series analysis is fundamental in epidemiological surveillance.
Here we’ll create a line chart showing monthly trends in detections over
a two-year period.</p>
<div class="section level3">
<h3 id="prepare-the-data-1">Prepare the data<a class="anchor" aria-label="anchor" href="#prepare-the-data-1"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Aggregate detections by month</span></span>
<span><span class="va">monthly_detections</span> <span class="op">&lt;-</span> <span class="fu">epiviz</span><span class="fu">::</span><span class="va"><a href="../reference/lab_data.html">lab_data</a></span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">specimen_date</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2022-01-01"</span><span class="op">)</span>,</span>
<span>    <span class="va">specimen_date</span> <span class="op">&lt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-12-31"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    specimen_month <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/round_date.html" class="external-link">floor_date</a></span><span class="op">(</span><span class="va">specimen_date</span>, <span class="st">"month"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">specimen_month</span>, name <span class="op">=</span> <span class="st">"detections"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-the-visualization-1">Create the visualization<a class="anchor" aria-label="anchor" href="#create-the-visualization-1"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/line_chart.html">line_chart</a></span><span class="op">(</span></span>
<span>  dynamic <span class="op">=</span> <span class="cn">FALSE</span>,  <span class="co"># Create static ggplot chart</span></span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    dfr <span class="op">=</span> <span class="va">monthly_detections</span>,   <span class="co"># Note: use 'dfr' parameter for line_chart</span></span>
<span>    x <span class="op">=</span> <span class="st">"specimen_month"</span>,      <span class="co"># Date variable for x-axis</span></span>
<span>    y <span class="op">=</span> <span class="st">"detections"</span>,          <span class="co"># Count variable for y-axis</span></span>
<span>    line_colour <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#007C91"</span><span class="op">)</span>, <span class="co"># Color for the line (vector format)</span></span>
<span>    line_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"solid"</span><span class="op">)</span>     <span class="co"># Line type</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/monthly-line-chart-1.png" width="768"></p>
<p><strong>Interpretation</strong>: This line chart reveals seasonal
patterns in laboratory detections, with potential peaks and troughs
throughout the two-year period.</p>
</div>
</div>
<div class="section level2">
<h2 id="tips-for-getting-started">Tips for getting started<a class="anchor" aria-label="anchor" href="#tips-for-getting-started"></a>
</h2>
<ol style="list-style-type: decimal">
<li><p><strong>Start with static charts</strong>: Use
<code>dynamic = FALSE</code> initially to create ggplot2 charts, then
switch to <code>dynamic = TRUE</code> for interactive plotly charts when
you need zooming, hovering, or filtering capabilities.</p></li>
<li><p><strong>Filter your data</strong>: The <code>lab_data</code>
dataset is quite large. Always filter to specific time periods, regions,
or organisms to create readable visualizations.</p></li>
<li><p><strong>Check your data structure</strong>: Use
<code><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse()</a></code> or <code><a href="https://rdrr.io/r/utils/str.html" class="external-link">str()</a></code> to understand your data
before passing it to visualization functions.</p></li>
<li><p><strong>Parameter naming</strong>: Most functions use a
<code>params</code> list to organize parameters. This keeps function
calls clean and allows for easy parameter reuse.</p></li>
<li><p><strong>Color consistency</strong>: Use consistent color schemes
across your visualizations. The package provides sensible defaults, but
you can customize colors using the <code>*_colours</code>
parameters.</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="next-steps">Next steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<ul>
<li>Explore the function-specific vignettes for detailed examples of
each visualization type</li>
<li>Try setting <code>dynamic = TRUE</code> in the examples above to see
interactive versions</li>
<li>Experiment with different time periods and filters to explore the
<code>lab_data</code> dataset</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Harshana Liyanage, Alex Bhattacharya, James Duke, Liam Fitzpatrick, James Leatherland, Jordan Worth, Emma Parker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
