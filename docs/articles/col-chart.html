<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Column charts • epiviz</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Column charts">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epiviz</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/age-sex-pyramid.html">Age-sex pyramids</a></li>
    <li><a class="dropdown-item" href="../articles/col-chart.html">Column charts</a></li>
    <li><a class="dropdown-item" href="../articles/epi-curve.html">Epi curves</a></li>
    <li><a class="dropdown-item" href="../articles/epi-map.html">Epidemiological maps</a></li>
    <li><a class="dropdown-item" href="../articles/getting-started.html">Getting started with epiviz</a></li>
    <li><a class="dropdown-item" href="../articles/line-chart.html">Line charts</a></li>
    <li><a class="dropdown-item" href="../articles/llm-interpret.html">LLM-assisted epidemiological narrative</a></li>
    <li><a class="dropdown-item" href="../articles/point-chart.html">Point charts</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ukhsa-collaboration/epiviz/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="col-chart_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="col-chart_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="col-chart_files/plotly-binding-4.11.0/plotly.js"></script><script src="col-chart_files/typedarray-0.1/typedarray.min.js"></script><link href="col-chart_files/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">
<script src="col-chart_files/crosstalk-1.2.2/js/crosstalk.min.js"></script><link href="col-chart_files/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="col-chart_files/plotly-main-2.11.1/plotly-latest.min.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Column charts</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ukhsa-collaboration/epiviz/blob/HEAD/vignettes/col-chart.Rmd" class="external-link"><code>vignettes/col-chart.Rmd</code></a></small>
      <div class="d-none name"><code>col-chart.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Column charts are essential tools in epidemiological surveillance for
comparing counts across categories such as regions, time periods, or
organism types. The <code><a href="../reference/col_chart.html">col_chart()</a></code> function provides flexible
options for creating both static and interactive column charts with
support for grouping, stacking, labeling, and advanced features like
case boxes and threshold lines.</p>
</div>
<div class="section level2">
<h2 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ukhsa-collaboration/epiviz" class="external-link">epiviz</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-1-basic-single-series-column-chart">Example 1: Basic single-series column chart<a class="anchor" aria-label="anchor" href="#example-1-basic-single-series-column-chart"></a>
</h2>
<p>Simple column charts are ideal for comparing counts across
categories. This example shows regional distribution of laboratory
detections.</p>
<div class="section level3">
<h3 id="prepare-the-data">Prepare the data<a class="anchor" aria-label="anchor" href="#prepare-the-data"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Aggregate detections by region for a specific time period (as used in tests)</span></span>
<span><span class="va">regional_summary</span> <span class="op">&lt;-</span> <span class="fu">epiviz</span><span class="fu">::</span><span class="va"><a href="../reference/lab_data.html">lab_data</a></span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">specimen_date</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-01-01"</span><span class="op">)</span>,</span>
<span>    <span class="va">specimen_date</span> <span class="op">&lt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-12-31"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">region</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>detections <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-the-basic-column-chart">Create the basic column chart<a class="anchor" aria-label="anchor" href="#create-the-basic-column-chart"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/col_chart.html">col_chart</a></span><span class="op">(</span></span>
<span>  dynamic <span class="op">=</span> <span class="cn">FALSE</span>,  <span class="co"># Create static ggplot chart</span></span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    df <span class="op">=</span> <span class="va">regional_summary</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"region"</span>,           <span class="co"># Categorical variable for x-axis</span></span>
<span>    y <span class="op">=</span> <span class="st">"detections"</span>,       <span class="co"># Numeric variable for y-axis</span></span>
<span>    fill_colours <span class="op">=</span> <span class="st">"#007C91"</span>,  <span class="co"># Single color for all bars</span></span>
<span>    chart_title <span class="op">=</span> <span class="st">"Laboratory Detections by Region 2023"</span>,</span>
<span>    x_axis_title <span class="op">=</span> <span class="st">"Region"</span>,</span>
<span>    y_axis_title <span class="op">=</span> <span class="st">"Number of detections"</span>,</span>
<span>    x_axis_label_angle <span class="op">=</span> <span class="op">-</span><span class="fl">45</span>  <span class="co"># Rotate labels for readability</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="col-chart_files/figure-html/basic-col-chart-1.png" width="768"></p>
<p><strong>Interpretation</strong>: This chart clearly shows the
regional distribution of laboratory detections in 2023, with London
having the highest number of detections and other regions following in
descending order.</p>
</div>
</div>
<div class="section level2">
<h2 id="example-2-grouped-stacked-column-chart">Example 2: Grouped stacked column chart<a class="anchor" aria-label="anchor" href="#example-2-grouped-stacked-column-chart"></a>
</h2>
<p>When you need to compare multiple categories within each group,
stacked column charts are effective. This example shows detections by
organism type within each region.</p>
<div class="section level3">
<h3 id="prepare-the-data-1">Prepare the data<a class="anchor" aria-label="anchor" href="#prepare-the-data-1"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Aggregate by region and organism species (as used in tests)</span></span>
<span><span class="va">region_organism_summary</span> <span class="op">&lt;-</span> <span class="fu">epiviz</span><span class="fu">::</span><span class="va"><a href="../reference/lab_data.html">lab_data</a></span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">specimen_date</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-01-01"</span><span class="op">)</span>,</span>
<span>    <span class="va">specimen_date</span> <span class="op">&lt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-12-31"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">region</span>, <span class="va">organism_species_name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>detections <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-the-grouped-stacked-chart">Create the grouped stacked chart<a class="anchor" aria-label="anchor" href="#create-the-grouped-stacked-chart"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/col_chart.html">col_chart</a></span><span class="op">(</span></span>
<span>  dynamic <span class="op">=</span> <span class="cn">FALSE</span>,  <span class="co"># Create static ggplot chart</span></span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    df <span class="op">=</span> <span class="va">region_organism_summary</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"region"</span>,                    <span class="co"># Primary grouping variable</span></span>
<span>    y <span class="op">=</span> <span class="st">"detections"</span>,                <span class="co"># Value variable</span></span>
<span>    group_var <span class="op">=</span> <span class="st">"organism_species_name"</span>,  <span class="co"># Secondary grouping variable</span></span>
<span>    group_var_barmode <span class="op">=</span> <span class="st">"stack"</span>,     <span class="co"># Stack bars within each group</span></span>
<span>    fill_colours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"KLEBSIELLA PNEUMONIAE"</span> <span class="op">=</span> <span class="st">"#007C91"</span>,</span>
<span>                     <span class="st">"STAPHYLOCOCCUS AUREUS"</span> <span class="op">=</span> <span class="st">"#8A1B61"</span>,</span>
<span>                     <span class="st">"PSEUDOMONAS AERUGINOSA"</span> <span class="op">=</span> <span class="st">"#FF7F32"</span><span class="op">)</span>,  <span class="co"># Named color mapping</span></span>
<span>    chart_title <span class="op">=</span> <span class="st">"Laboratory Detections by Region \nand Species 2023"</span>,</span>
<span>    chart_footer <span class="op">=</span> <span class="st">"This chart has been created using simulated data."</span>,</span>
<span>    x_axis_title <span class="op">=</span> <span class="st">"Region"</span>,</span>
<span>    y_axis_title <span class="op">=</span> <span class="st">"Number of detections"</span>,</span>
<span>    legend_title <span class="op">=</span> <span class="st">"Organism species"</span>,</span>
<span>    x_axis_label_angle <span class="op">=</span> <span class="op">-</span><span class="fl">45</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="col-chart_files/figure-html/chunk-1-1.png" width="768"></p>
<p><strong>Interpretation</strong>: This stacked chart reveals both
regional differences in total detections and the relative contribution
of different organism types within each region.</p>
</div>
</div>
<div class="section level2">
<h2 id="example-3-column-chart-with-bar-labels">Example 3: Column chart with bar labels<a class="anchor" aria-label="anchor" href="#example-3-column-chart-with-bar-labels"></a>
</h2>
<p>Bar labels show exact values on each bar, making it easier to read
precise counts without estimating from the axis.</p>
<div class="section level3">
<h3 id="create-the-chart-with-bar-labels">Create the chart with bar labels<a class="anchor" aria-label="anchor" href="#create-the-chart-with-bar-labels"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/col_chart.html">col_chart</a></span><span class="op">(</span></span>
<span>  dynamic <span class="op">=</span> <span class="cn">FALSE</span>,  <span class="co"># Create static ggplot chart</span></span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    df <span class="op">=</span> <span class="va">regional_summary</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"region"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"detections"</span>,</span>
<span>    fill_colours <span class="op">=</span> <span class="st">"#007C91"</span>,</span>
<span>    chart_title <span class="op">=</span> <span class="st">"Laboratory Detections by Region 2023"</span>,</span>
<span>    x_axis_title <span class="op">=</span> <span class="st">"Region"</span>,</span>
<span>    y_axis_title <span class="op">=</span> <span class="st">"Number of detections"</span>,</span>
<span>    x_axis_label_angle <span class="op">=</span> <span class="op">-</span><span class="fl">45</span>,</span>
<span>    bar_labels <span class="op">=</span> <span class="st">"detections"</span>,      <span class="co"># Show values on bars</span></span>
<span>    bar_labels_pos <span class="op">=</span> <span class="st">"bar_base"</span>     <span class="co"># Position labels at base of bars</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="col-chart_files/figure-html/chunk-2-1.png" width="768"></p>
<p><strong>Interpretation</strong>: The bar labels make it easy to see
exact detection counts for each region without having to estimate from
the y-axis scale.</p>
</div>
</div>
<div class="section level2">
<h2 id="example-4-interactive-column-chart-with-case-boxes">Example 4: Interactive column chart with case boxes<a class="anchor" aria-label="anchor" href="#example-4-interactive-column-chart-with-case-boxes"></a>
</h2>
<p>Case boxes are useful for highlighting specific data points or adding
additional context to your visualization.</p>
<div class="section level3">
<h3 id="prepare-data-for-case-boxes">Prepare data for case boxes<a class="anchor" aria-label="anchor" href="#prepare-data-for-case-boxes"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Use a shorter time period for case boxes demonstration</span></span>
<span><span class="va">case_box_data</span> <span class="op">&lt;-</span> <span class="fu">epiviz</span><span class="fu">::</span><span class="va"><a href="../reference/lab_data.html">lab_data</a></span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">specimen_date</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-01-01"</span><span class="op">)</span>,</span>
<span>    <span class="va">specimen_date</span> <span class="op">&lt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-01-07"</span><span class="op">)</span>  <span class="co"># One week for case boxes</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">region</span>, <span class="va">organism_species_name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>detections <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-the-interactive-chart-with-case-boxes">Create the interactive chart with case boxes<a class="anchor" aria-label="anchor" href="#create-the-interactive-chart-with-case-boxes"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/col_chart.html">col_chart</a></span><span class="op">(</span></span>
<span>  dynamic <span class="op">=</span> <span class="cn">TRUE</span>,   <span class="co"># Create interactive plotly chart</span></span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    df <span class="op">=</span> <span class="va">case_box_data</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"region"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"detections"</span>,</span>
<span>    group_var <span class="op">=</span> <span class="st">"organism_species_name"</span>,</span>
<span>    group_var_barmode <span class="op">=</span> <span class="st">"stack"</span>,</span>
<span>    fill_colours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"KLEBSIELLA PNEUMONIAE"</span> <span class="op">=</span> <span class="st">"#007C91"</span>,</span>
<span>                     <span class="st">"STAPHYLOCOCCUS AUREUS"</span> <span class="op">=</span> <span class="st">"#8A1B61"</span>,</span>
<span>                     <span class="st">"PSEUDOMONAS AERUGINOSA"</span> <span class="op">=</span> <span class="st">"#FF7F32"</span><span class="op">)</span>,</span>
<span>    case_boxes <span class="op">=</span> <span class="cn">TRUE</span>,              <span class="co"># Enable case boxes</span></span>
<span>    chart_title <span class="op">=</span> <span class="st">"Laboratory Detections by Region \nand Species (Week 1, 2023)"</span>,</span>
<span>    chart_footer <span class="op">=</span> <span class="st">"This chart has been created using simulated data."</span>,</span>
<span>    x_axis_title <span class="op">=</span> <span class="st">"Region"</span>,</span>
<span>    y_axis_title <span class="op">=</span> <span class="st">"Number of detections"</span>,</span>
<span>    legend_title <span class="op">=</span> <span class="st">"Organism species"</span>,</span>
<span>    x_axis_label_angle <span class="op">=</span> <span class="op">-</span><span class="fl">45</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="plotly html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:768px;height:576px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"visdat":{"7598485c73d3":["function () ","plotlyVisDat"]},"cur_data":"7598485c73d3","attrs":{"7598485c73d3":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"bar","color":{},"colors":["#007C91","#8A1B61","#FF7F32"],"marker":{"line":{"color":"white","width":0.5}},"text":"","textposition":"none","customdata":[3,3,3,3,3,3,2,2,6,6,6,6,6,6,1,11,11,11,11,11,11,11,11,11,11,11,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,11,11,11,11,11,11,11,11,11,11,11,10,10,10,10,10,10,10,10,10,10,4,4,4,4,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,7,7,7,7,7,7,7,7,7,7,7,7,7,7,11,11,11,11,11,11,11,11,11,11,11,5,5,5,5,5,5,5,5,5,5,2,2,5,5,5,5,5,8,8,8,8,8,8,8,8,5,5,5,5,5,1,10,10,10,10,10,10,10,10,10,10,7,7,7,7,7,7,7,5,5,5,5,5,13,13,13,13,13,13,13,13,13,13,13,13,13],"hovertemplate":"<b>%{x}<\/b><br>%{customdata}","orientation":"v","showlegend":true,"inherit":true}},"layout":{"margin":{"b":102.54517622670592,"l":3,"t":50,"r":10},"title":{"text":"<b>Laboratory Detections by Region <br>and Species (Week 1, 2023)<\/b>","font":{"family":"Arial","size":12,"color":"black"},"x":0.5,"y":1.1000000000000001,"xanchor":"centre","yanchor":"bottom","xref":"paper","yref":"paper"},"annotations":[{"x":1,"y":-0.29210842294409423,"text":"This chart has been created using simulated data.","xanchor":"right","yanchor":"middle","xref":"paper","yref":"paper","showarrow":false,"font":{"family":"Arial","size":10,"color":"black"},"align":"right"},{"x":1,"y":-0.29210842294409423,"text":"This chart has been created using simulated data.","xanchor":"right","yanchor":"middle","xref":"paper","yref":"paper","showarrow":false,"font":{"family":"Arial","size":10,"color":"black"},"align":"right"},{"x":1,"y":-0.29210842294409423,"text":"This chart has been created using simulated data.","xanchor":"right","yanchor":"middle","xref":"paper","yref":"paper","showarrow":false,"font":{"family":"Arial","size":10,"color":"black"},"align":"right"}],"xaxis":{"domain":[0,1],"automargin":true,"title":{"text":"<b>Region<\/b>","font":{"family":"Arial","size":11,"color":"black"}},"tickfont":{"family":"Arial","size":9,"color":"black"},"tickangle":45,"showline":true,"linewidth":1,"ticks":"outside","ticklen":3,"range":[-0.59999999999999998,8.5999999999999996],"type":"category","categoryorder":"array","categoryarray":["East Midlands","East of England","London","North East","North West","South East","South West","West Midlands","Yorkshire and Humber"]},"yaxis":{"domain":[0,1],"automargin":true,"title":{"text":"<b>Number of detections<\/b>","font":{"family":"Arial","size":11,"color":"black"}},"tickfont":{"family":"Arial","size":9,"color":"black"},"tickangle":-0,"showline":true,"zeroline":false,"linewidth":1,"ticks":"outside","ticklen":3,"range":[0,41]},"font":{"family":"Arial","size":9,"color":"black"},"barmode":"stack","legend":{"x":1.02,"y":0.5,"xanchor":"left","yanchor":"middle","orientation":"v","title":{"text":"Organism species","font":{"size":8}},"font":{"size":8}},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["East Midlands","East Midlands","East of England","East of England","East of England","East of England","East of England","East of England","East of England","East of England","East of England","East of England","East of England","London","London","London","London","London","London","London","London","London","London","North East","North East","North East","North East","North West","North West","North West","North West","North West","North West","North West","South East","South East","South East","South East","South East","South West","South West","South West","South West","South West","South West","South West","South West","West Midlands","West Midlands","West Midlands","West Midlands","West Midlands","West Midlands","West Midlands","West Midlands","West Midlands","West Midlands","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber"],"y":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"bar","marker":{"color":"rgba(138,27,97,1)","line":{"color":"white","width":0.5}},"text":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"textposition":["none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none"],"customdata":[2,2,11,11,11,11,11,11,11,11,11,11,11,10,10,10,10,10,10,10,10,10,10,4,4,4,4,7,7,7,7,7,7,7,5,5,5,5,5,8,8,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,13,13,13,13,13,13,13,13,13,13,13,13,13],"hovertemplate":["<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}"],"orientation":"v","showlegend":true,"name":"STAPHYLOCOCCUS AUREUS","textfont":{"color":"rgba(138,27,97,1)"},"error_y":{"color":"rgba(138,27,97,1)"},"error_x":{"color":"rgba(138,27,97,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["East Midlands","East Midlands","East Midlands","East of England","London","London","London","London","London","London","London","London","London","London","London","North West","North West","North West","North West","North West","North West","North West","South East","South East","South East","South East","South East","South West","South West","South West","South West","South West","West Midlands","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber"],"y":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"bar","marker":{"color":"rgba(255,127,50,1)","line":{"color":"white","width":0.5}},"text":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"textposition":["none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none"],"customdata":[3,3,3,1,11,11,11,11,11,11,11,11,11,11,11,7,7,7,7,7,7,7,5,5,5,5,5,5,5,5,5,5,1,5,5,5,5,5],"hovertemplate":["<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}"],"orientation":"v","showlegend":true,"name":"PSEUDOMONAS AERUGINOSA","textfont":{"color":"rgba(255,127,50,1)"},"error_y":{"color":"rgba(255,127,50,1)"},"error_x":{"color":"rgba(255,127,50,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["East Midlands","East Midlands","East Midlands","East of England","East of England","East of England","East of England","East of England","East of England","London","London","London","London","London","London","London","London","London","London","London","London","London","London","London","London","London","London","London","London","North West","North West","North West","North West","North West","North West","North West","North West","North West","North West","North West","North West","North West","North West","North West","North West","North West","South East","South East","South East","South East","South East","South East","South East","South East","South East","South East","South East","South West","South West","West Midlands","West Midlands","West Midlands","West Midlands","West Midlands","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber","Yorkshire and Humber"],"y":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"type":"bar","marker":{"color":"rgba(0,124,145,1)","line":{"color":"white","width":0.5}},"text":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"textposition":["none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none"],"customdata":[3,3,3,6,6,6,6,6,6,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,11,11,11,11,11,11,11,11,11,11,11,2,2,5,5,5,5,5,7,7,7,7,7,7,7],"hovertemplate":["<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}","<b>%{x}<\/b><br>%{customdata}"],"orientation":"v","showlegend":true,"name":"KLEBSIELLA PNEUMONIAE","textfont":{"color":"rgba(0,124,145,1)"},"error_y":{"color":"rgba(0,124,145,1)"},"error_x":{"color":"rgba(0,124,145,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p><strong>Interpretation</strong>: The interactive chart with case
boxes allows users to explore the data dynamically while highlighting
specific data points of interest.</p>
</div>
</div>
<div class="section level2">
<h2 id="example-5-column-chart-with-threshold-lines">Example 5: Column chart with threshold lines<a class="anchor" aria-label="anchor" href="#example-5-column-chart-with-threshold-lines"></a>
</h2>
<p>Threshold lines help identify data points that exceed or fall below
important cutoffs, such as outbreak levels or target values.</p>
<div class="section level3">
<h3 id="create-the-chart-with-threshold-lines">Create the chart with threshold lines<a class="anchor" aria-label="anchor" href="#create-the-chart-with-threshold-lines"></a>
</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/col_chart.html">col_chart</a></span><span class="op">(</span></span>
<span>  dynamic <span class="op">=</span> <span class="cn">FALSE</span>,  <span class="co"># Create static ggplot chart</span></span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    df <span class="op">=</span> <span class="va">region_organism_summary</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"region"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"detections"</span>,</span>
<span>    group_var <span class="op">=</span> <span class="st">"organism_species_name"</span>,</span>
<span>    group_var_barmode <span class="op">=</span> <span class="st">"stack"</span>,</span>
<span>    fill_colours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"KLEBSIELLA PNEUMONIAE"</span> <span class="op">=</span> <span class="st">"#007C91"</span>,</span>
<span>                     <span class="st">"STAPHYLOCOCCUS AUREUS"</span> <span class="op">=</span> <span class="st">"#8A1B61"</span>,</span>
<span>                     <span class="st">"PSEUDOMONAS AERUGINOSA"</span> <span class="op">=</span> <span class="st">"#FF7F32"</span><span class="op">)</span>,</span>
<span>    <span class="co"># Threshold lines</span></span>
<span>    hline <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">2000</span><span class="op">)</span>,          <span class="co"># Multiple threshold lines</span></span>
<span>    hline_colour <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"orange"</span>, <span class="st">"red"</span><span class="op">)</span>,  <span class="co"># Colors for each line</span></span>
<span>    hline_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Alert level"</span>, <span class="st">"Outbreak threshold"</span><span class="op">)</span>,  <span class="co"># Labels for lines</span></span>
<span>    hline_label_colour <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"orange"</span>, <span class="st">"red"</span><span class="op">)</span>,  <span class="co"># Label colors</span></span>
<span>    hline_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dashed"</span>, <span class="st">"solid"</span><span class="op">)</span>,  <span class="co"># Line types</span></span>
<span>    hline_width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,          <span class="co"># Line widths</span></span>
<span>    chart_title <span class="op">=</span> <span class="st">"Laboratory Detections by Region \nand Species 2023"</span>,</span>
<span>    chart_footer <span class="op">=</span> <span class="st">"This chart has been created using simulated data."</span>,</span>
<span>    x_axis_title <span class="op">=</span> <span class="st">"Region"</span>,</span>
<span>    y_axis_title <span class="op">=</span> <span class="st">"Number of detections"</span>,</span>
<span>    legend_title <span class="op">=</span> <span class="st">"Organism species"</span>,</span>
<span>    x_axis_label_angle <span class="op">=</span> <span class="op">-</span><span class="fl">45</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="col-chart_files/figure-html/chunk-5-1.png" width="768"></p>
<p><strong>Interpretation</strong>: The threshold lines help identify
regions that exceed alert levels (orange dashed line) or outbreak
thresholds (red solid line), guiding public health response
priorities.</p>
</div>
</div>
<div class="section level2">
<h2 id="example-6-time-series-column-chart">Example 6: Time-series column chart<a class="anchor" aria-label="anchor" href="#example-6-time-series-column-chart"></a>
</h2>
<p>Time-series column charts are crucial for surveillance, showing
temporal patterns in disease occurrence. This example demonstrates
weekly aggregation.</p>
<div class="section level3">
<h3 id="prepare-the-time-series-data">Prepare the time-series data<a class="anchor" aria-label="anchor" href="#prepare-the-time-series-data"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create weekly time series data</span></span>
<span><span class="va">weekly_series</span> <span class="op">&lt;-</span> <span class="fu">epiviz</span><span class="fu">::</span><span class="va"><a href="../reference/lab_data.html">lab_data</a></span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">specimen_date</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-01-01"</span><span class="op">)</span>,</span>
<span>    <span class="va">specimen_date</span> <span class="op">&lt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-03-31"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    specimen_week <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/round_date.html" class="external-link">floor_date</a></span><span class="op">(</span><span class="va">specimen_date</span>, <span class="st">"week"</span>, week_start <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>  <span class="co"># Monday start</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">specimen_week</span>, name <span class="op">=</span> <span class="st">"detections"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-the-time-series-column-chart">Create the time-series column chart<a class="anchor" aria-label="anchor" href="#create-the-time-series-column-chart"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/col_chart.html">col_chart</a></span><span class="op">(</span></span>
<span>  dynamic <span class="op">=</span> <span class="cn">FALSE</span>,  <span class="co"># Create static ggplot chart</span></span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    df <span class="op">=</span> <span class="va">weekly_series</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"specimen_week"</span>,        <span class="co"># Date variable for x-axis</span></span>
<span>    y <span class="op">=</span> <span class="st">"detections"</span>,           <span class="co"># Count variable</span></span>
<span>    x_time_series <span class="op">=</span> <span class="cn">TRUE</span>,       <span class="co"># Indicate this is time series data</span></span>
<span>    time_period <span class="op">=</span> <span class="st">"iso_year_week"</span>,  <span class="co"># Aggregation period</span></span>
<span>    fill_colours <span class="op">=</span> <span class="st">"#007C91"</span>,</span>
<span>    chart_title <span class="op">=</span> <span class="st">"Weekly laboratory detections (Q1 2023)"</span>,</span>
<span>    x_axis_title <span class="op">=</span> <span class="st">"Week"</span>,</span>
<span>    y_axis_title <span class="op">=</span> <span class="st">"Number of detections"</span>,</span>
<span>    x_axis_label_angle <span class="op">=</span> <span class="op">-</span><span class="fl">45</span>,</span>
<span>    <span class="co"># Custom styling for time series</span></span>
<span>    x_axis_date_breaks <span class="op">=</span> <span class="st">"2 weeks"</span>,  <span class="co"># Show every 2 weeks</span></span>
<span>    x_axis_date_labels <span class="op">=</span> <span class="st">"%b %d"</span>     <span class="co"># Format: Jan 01</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="col-chart_files/figure-html/chunk-7-1.png" alt="Column chart showing the number of laboratory detections for each ISO week between January and March 2023." width="768"><p class="caption">
Weekly laboratory detections between January and March 2023.
</p>
</div>
<p><strong>Interpretation</strong>: This time-series chart reveals
weekly patterns in laboratory detections, helping identify trends,
seasonal effects, and potential outbreaks.</p>
</div>
</div>
<div class="section level2">
<h2 id="tips-for-column-charts">Tips for column charts<a class="anchor" aria-label="anchor" href="#tips-for-column-charts"></a>
</h2>
<ol style="list-style-type: decimal">
<li><p><strong>Data aggregation</strong>: Always aggregate your data
appropriately before passing it to <code><a href="../reference/col_chart.html">col_chart()</a></code>. The
function expects pre-calculated counts or values.</p></li>
<li>
<p><strong>Color mapping</strong>: Use named color vectors for
grouped data to ensure consistent colors across charts:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fill_colours</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"KLEBSIELLA PNEUMONIAE"</span> <span class="op">=</span> <span class="st">"#007C91"</span>,</span>
<span>                 <span class="st">"STAPHYLOCOCCUS AUREUS"</span> <span class="op">=</span> <span class="st">"#8A1B61"</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p><strong>Grouping options</strong>:</p>
<ul>
<li>
<code>group_var_barmode = "stack"</code> for stacked bars (shows
composition)</li>
<li>
<code>group_var_barmode = "group"</code> for grouped bars (shows
comparison)</li>
</ul>
</li>
<li>
<p><strong>Bar labels</strong>: Use <code>bar_labels</code> and
<code>bar_labels_pos</code> to show exact values on bars:</p>
<ul>
<li>
<code>"bar_base"</code> - at the base of bars</li>
<li>
<code>"bar_centre"</code> - at the center of bars</li>
<li>
<code>"bar_top"</code> - at the top of bars</li>
</ul>
</li>
<li><p><strong>Case boxes</strong>: Enable
<code>case_boxes = TRUE</code> for interactive charts to highlight
specific data points.</p></li>
<li><p><strong>Threshold lines</strong>: Use <code>hline</code>
parameters to add horizontal reference lines for alert levels or
targets.</p></li>
<li><p><strong>Time series</strong>: When working with dates, set
<code>x_time_series = TRUE</code> and specify the appropriate
<code>time_period</code> for proper aggregation.</p></li>
<li><p><strong>Interactive features</strong>: Set
<code>dynamic = TRUE</code> for interactive charts with zooming,
hovering, and filtering capabilities.</p></li>
<li><p><strong>Chart footers</strong>: Add <code>chart_footer</code> to
provide context about data sources or limitations.</p></li>
<li><p><strong>Label rotation</strong>: Use
<code>x_axis_label_angle = -45</code> for long category labels to
improve readability.</p></li>
</ol>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Harshana Liyanage, James Duke, Alex Bhattacharya, Liam Fitzpatrick, James Leatherland, Jordan Worth, Emma Parker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
